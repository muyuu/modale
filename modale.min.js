"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};!function(t){var e="uiModale",o="object"===("undefined"==typeof self?"undefined":_typeof(self))&&self.self===self&&self||"object"===("undefined"==typeof global?"undefined":_typeof(global))&&global.global===global&&global;"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=t(o,require("jquery")):o[e]=t(o,$)}(function(t,e){function o(t){var o=".js-modale",s=n(t)?{}:t,r=void 0;n(s.root)&&(r=e(o)),n(s.root)||(r=s.root instanceof jQuery?t.root:e(t.root));for(var l=r.length,a=[],d=0;d<l;d++)a[d]=new i(s,r[d]);return a}function i(t,o){var i=this;this.target=null,this.sourceType=null,this.extension=null,this.$root=e(o),this.opt={root:o,width:n(t.width)?800:t.width,height:n(t.height)?600:t.height,padding:n(t.padding)?40:t.padding,type:n(t.type)?"img":t.type,closeEl:n(t.closeEl)?".js-modaleClose":t.closeEl,startOpen:!n(t.startOpen)&&t.startOpen,clone:!n(t.clone)&&t.clone,btn:!n(t.btn)&&t.btn,btnStr:n(t.btnStr)?"close":t.btnStr,btnPadding:n(t.btnPadding)?20:t.btnPadding,onOpen:n(t.onOpen)?null:t.onOpen,onClose:n(t.onClose)?null:t.onClose},this.isOpen=!1,this.$root.on("click",function(t){return t.preventDefault(),i.init(),!1}),this.opt.startOpen&&this.init()}var n=function(t){return void 0===t},s=function(t){return"png"===d(t)},r=function(t){return"gif"===d(t)},l=function(t){return"jpg"===d(t)},a=function(t){return 0===t.indexOf("#")},d=function(t){var e=void 0;if(!t)return!1;var o=t.split("."),i=o.length;return 0!==i&&(e=o[i-1])};return i.prototype.init=function(){return this.isOpen=!0,this.setTarget(),this.setType(),this.drawModalElement(),this.calcSize(this.open),this},i.prototype.setTarget=function(){return this.target=this.$root.attr("href"),this},i.prototype.setType=function(){return this.target.indexOf("youtube.com")!==-1&&(this.sourceType="youtube",this.setYoutubeId()),(s(this.target)||r(this.target)||l(this.target))&&(this.sourceType="img"),a(this.target)&&(this.sourceType="div"),"iframe"===this.opt.type&&(this.sourceType="iframe"),this},i.prototype.setYoutubeId=function(){return this.target=this.getYoutubeId(),this},i.prototype.getYoutubeId=function(){var t=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=)([^#\&\?]*).*/,e=this.target.match(t);if(e&&11==e[2].length)return e[2]},i.prototype.drawModalElement=function(){return this.drawOverlay(),this.drawModal(),this.drawModalBody(),this.drawModalContent(),this.opt.btn&&this.drawModalBtn(),this.setModalElements(),this.setModalCloseElements(),this},i.prototype.drawOverlay=function(){return e("body").append("<div id='js-modaleOverlay' class='ui-modal__overlay'>"),this.$overlay=e("#js-modale-overlay"),this},i.prototype.drawModal=function(){return e("body").append("<div id='js-modale' class='ui-modal'>"),this.$modal=e("#js-modale"),this},i.prototype.drawModalBody=function(){return this.$modal.append("<div id='js-modaleBody' class='ui-modal__body'>"),this.$modalBody=e("#js-modaleBody"),this},i.prototype.drawModalContent=function(){var t="<img src='"+this.target+"' >";return"youtube"===this.sourceType&&(t="<iframe src='https://www.youtube.com/embed/"+this.target+"?enablejsapi=1&amp;rel=0&amp;controls=0&amp;showinfo=0' width='' height='' frameborder='0' allowfullscreen></iframe>"),"iframe"===this.sourceType&&(t="<iframe src='"+this.target+"' width='' height='' frameborder='0' allowfullscreen></iframe>"),"div"===this.sourceType&&(t=this.opt.clone?e(this.target).clone(!0,!0):e(this.target)),this.$modalBody.append(t),this},i.prototype.drawModalBtn=function(){var t="<a id='js-modaleClose' class='ui-modal__close' href='#'>"+this.opt.btnStr+"</a>";return e("body").append(t),this.$modalBtn=e("#js-modaleClose"),this},i.prototype.setModalElements=function(){return this.$modalElements=e("#js-modaleOverlay, #js-modale, #js-modaleClose"),this},i.prototype.setModalCloseElements=function(){return this.$modalCloseElements=e("#js-modaleOverlay, "+this.opt.closeEl),this},i.prototype.calcSize=function(t){var e=this;if("img"===this.sourceType)!function(){var o=new Image;o.src=e.target,o.onload=function(){return e.setSize(o.width,o.height),"function"==typeof t&&void t.apply(e)}}();else{if(this.setSize(this.opt.width,this.opt.height),"function"!=typeof t)return!1;t.apply(this)}},i.prototype.adjustSize=function(t,o){var i=this.opt.padding,n=e(window).width(),s=e(window).height();return n<=t&&(t=n-i),s<=o&&(o=s-i),[t,o]},i.prototype.setSize=function(t,o){var i=this.adjustSize(t,o),n=i.width,s=i.height;return this.currentScrollY=e(window).scrollTop(),e("body, html").css({top:-1*this.currentScrollY}),this.$modal.css({width:n,height:s}),this.opt.btn&&this.$modalBtn.css({"margin-top":s/2+this.opt.btnPadding}),"youtube"!==this.sourceType&&"iframe"!==this.sourceType||this.$modalBody.find("iframe").css({width:n,height:s}),this},i.prototype.reCalcSize=function(){var t=this.$modalBody.width(),e=this.$modalBody.height(),o=this.$modal.width(),i=this.$modal.height(),n=void 0,s=void 0,r=function(){return o>t},l=function(){return i>e},a=function(){return!r()&&!l()};return r()&&(n=t),l()&&(s=e),a()?this:(this.$modal.animate({width:n,height:s},300,"swing"),this)},i.prototype.open=function(){var t=this;return e("body").addClass("js-noScroll"),this.$modalElements.fadeIn().promise().done(function(){t.setCloseEvent(),t.reCalcSize(),"function"==typeof t.opt.onOpen&&t.opt.onOpen()}),this},i.prototype.close=function(){var t=this;return this.isOpen?(this.$modalElements.fadeOut().promise().done(function(){var o=e("body");"div"!==t.sourceType||t.opt.clone||o.append(e(t.target)),t.$modalElements.remove(),o.removeClass("js-noScroll"),e("body, html").attr({style:""}).prop({scrollTop:t.currentScrollY}),"function"==typeof t.opt.onClose&&t.opt.onClose()}),this):this},i.prototype.setCloseEvent=function(){var t=this;this.$modalCloseElements.on("click",function(e){e.preventDefault(),t.close()})},o});
//# sourceMappingURL=modale.min.js.map
