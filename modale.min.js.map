{"version":3,"sources":["modale.min.js"],"names":["_typeof","Symbol","iterator","obj","constructor","definition","moduleName","root","self","global","exports","module","require","$","factory","param","$self","rootElement","opt","isUndefined","jQuery","map","key","val","Module","moduleRoot","_this","this","target","sourceType","extension","$root","width","height","padding","type","startOpen","clone","btn","on","e","preventDefault","init","isPng","str","getExtension","isGif","isJpg","isDiv","indexOf","fileName","ret","fileTypes","split","len","length","prototype","setTarget","setType","drawModalElement","calcSize","open","attr","setYoutubeId","getYoutubeId","regExp","match","drawOverlay","drawModal","drawModalBody","drawModalContent","drawModalBtn","setModalElements","setModalCloseElements","append","$overlay","$modal","$modalBody","contentStr","btnStr","$modalElements","$modalCloseElements","func","_this2","img","Image","src","onload","setSize","apply","css","find","_this3","addClass","fadeIn","setCloseEvent","close","_this4","fadeOut","$body","remove","removeClass","_this5"],"mappings":"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","file":"modale.min.js","sourcesContent":["\"use strict\";\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; };\n\n(function (definition) {\n    \"use strict\";\n\n    var moduleName = \"uiModale\";\n\n    var root = (typeof self === \"undefined\" ? \"undefined\" : _typeof(self)) === \"object\" && self.self === self && self || (typeof global === \"undefined\" ? \"undefined\" : _typeof(global)) === \"object\" && global.global === global && global;\n\n    if ((typeof exports === \"undefined\" ? \"undefined\" : _typeof(exports)) === \"object\") {\n        module.exports = definition(root, require(\"jquery\"));\n    } else {\n        root[moduleName] = definition(root, $);\n    }\n})(function (root, $) {\n    \"use strict\";\n\n    // -------------------------------------------------------\n    // utility functions\n    // -------------------------------------------------------\n\n    var trimDot = function trimDot(s) {\n        return s.replace(\".\", \"\");\n    };\n\n    var isUndefined = function isUndefined(obj) {\n        return obj === void 0;\n    };\n\n    var isPng = function isPng(str) {\n        return getExtension(str) === \"png\";\n    };\n    var isGif = function isGif(str) {\n        return getExtension(str) === \"gif\";\n    };\n    var isJpg = function isJpg(str) {\n        return getExtension(str) === \"jpg\";\n    };\n    var isDiv = function isDiv(str) {\n        return str.indexOf(\"#\") === 0;\n    };\n    var isYoutube = function isYoutube(str) {\n        return str.indexOf(\"youtube.com\") !== -1;\n    };\n\n    var getExtension = function getExtension(fileName) {\n        var ret = void 0;\n        if (!fileName) return false;\n\n        var fileTypes = fileName.split(\".\");\n        var len = fileTypes.length;\n        if (len === 0) return false;\n\n        ret = fileTypes[len - 1];\n        return ret;\n    };\n\n    // -------------------------------------------------------\n    // module\n    // -------------------------------------------------------\n\n    /**\n     * module factory\n     * this module is dependent on jQuery\n     * @prop {string} rootElement default root element class or id\n     * @prop {array} instance\n     * @namespace\n     */\n    function factory(param) {\n        var rootElement = \".js-modale\";\n        var opt = !isUndefined(param) ? param : {};\n\n        var $self;\n        if (isUndefined(opt.root)) $self = $(rootElement);\n        if (!isUndefined(opt.root)) $self = opt.root instanceof jQuery ? param.root : $(param.root);\n\n        return $self.map(function (key, val) {\n            new Module(opt, val);\n        });\n    }\n\n    /**\n     * constructor\n     * @sourceType {Function}\n     */\n    function Module(param, moduleRoot) {\n        var _this = this;\n\n        this.target = null;\n        this.sourceType = null;\n        this.extension = null;\n        this.$root = $(moduleRoot);\n\n        this.opt = {\n            root: this.moduleRoot,\n            width: isUndefined(param.width) ? 800 : param.width,\n            height: isUndefined(param.height) ? 600 : param.height,\n            padding: isUndefined(param.padding) ? 40 : param.padding,\n\n            type: isUndefined(param.type) ? \"img\" : param.type,\n\n            startOpen: isUndefined(param.startOpen) ? false : param.startOpen,\n\n            clone: isUndefined(param.clone) ? false : param.clone,\n            btn: isUndefined(param.btn) ? true : param.btn\n        };\n\n        this.$root.on(\"click\", function (e) {\n            e.preventDefault();\n\n            _this.init();\n            return false;\n        });\n\n        if (this.opt.startOpen) this.init();\n    }\n\n    Module.prototype.init = function () {\n        this.setTarget();\n        this.setType();\n        this.drawModalElement();\n        this.calcSize(this.open);\n        return this;\n    };\n\n    Module.prototype.setTarget = function () {\n\n        this.target = this.$root.attr(\"href\");\n        return this;\n    };\n\n    Module.prototype.setType = function () {\n\n        if (this.target.indexOf(\"youtube.com\") !== -1) {\n            this.sourceType = \"youtube\";\n            this.setYoutubeId();\n        }\n        if (isPng(this.target) || isGif(this.target) || isJpg(this.target)) {\n            this.sourceType = \"img\";\n        }\n        if (isDiv(this.target)) {\n            this.sourceType = \"div\";\n        }\n        if (this.opt.type === \"iframe\") {\n            this.sourceType = \"iframe\";\n        }\n        return this;\n    };\n\n    Module.prototype.setYoutubeId = function () {\n        this.target = this.getYoutubeId();\n        return this;\n    };\n\n    Module.prototype.getYoutubeId = function () {\n        var regExp = /^.*(youtu.be\\/|v\\/|u\\/\\w\\/|embed\\/|watch\\?v=)([^#\\&\\?]*).*/;\n        var match = this.target.match(regExp);\n        if (match && match[2].length == 11) {\n            return match[2];\n        } else {\n            //error\n        }\n    };\n\n    Module.prototype.drawModalElement = function () {\n        this.drawOverlay();\n        this.drawModal();\n        this.drawModalBody();\n        this.drawModalContent();\n\n        if (this.opt.btn) {\n            this.drawModalBtn();\n        }\n\n        this.setModalElements();\n        this.setModalCloseElements();\n        return this;\n    };\n\n    Module.prototype.drawOverlay = function () {\n\n        $(\"body\").append(\"<div id='js-modaleOverlay' class='ui-modal__overlay'>\");\n        this.$overlay = $(\"#js-modale-overlay\");\n        return this;\n    };\n\n    Module.prototype.drawModal = function () {\n\n        $(\"body\").append(\"<div id='js-mode  l' class='ui-modal'>\");\n        this.$modal = $(\"#js-modale\");\n\n        return this;\n    };\n\n    Module.prototype.drawModalBody = function () {\n\n        this.$modal.append(\"<div id='js-modaleBody' class='ui-modal__body'>\");\n        this.$modalBody = $(\"#js-modaleBody\");\n\n        return this;\n    };\n\n    Module.prototype.drawModalContent = function () {\n\n        var contentStr = \"<img src='\" + this.target + \"' >\";\n\n        if (this.sourceType === \"youtube\") {\n            contentStr = \"<iframe src='https://www.youtube.com/embed/\" + this.target + \"?enablejsapi=1&amp;rel=0&amp;controls=0&amp;showinfo=0' width='' height='' frameborder='0' allowfullscreen></iframe>\";\n        }\n        if (this.sourceType === \"iframe\") {\n            contentStr = \"<iframe src='\" + this.target + \"' width='' height='' frameborder='0' allowfullscreen></iframe>\";\n        }\n\n        if (this.sourceType === \"div\") {\n            if (this.opt.clone) {\n                contentStr = $(this.target).clone(true, true);\n            } else {\n                contentStr = $(this.target);\n            }\n        }\n\n        this.$modalBody.append(contentStr);\n\n        return this;\n    };\n\n    Module.prototype.drawModalBtn = function () {\n        var btnStr = \"<a id='js-modaleClose' class='ui-modal__close' href='#'>close</a>\";\n        this.$modalBody.append(btnStr);\n        return this;\n    };\n\n    Module.prototype.setModalElements = function () {\n        this.$modalElements = $(\"#js-modaleOverlay, #js-modale\");\n        return this;\n    };\n\n    Module.prototype.setModalCloseElements = function () {\n        this.$modalCloseElements = $(\"#js-modaleOverlay, #js-modaleClose\");\n        return this;\n    };\n\n    Module.prototype.calcSize = function (func) {\n        var _this2 = this;\n\n        if (this.sourceType === \"img\") {\n\n            var img = new Image();\n            img.src = this.target;\n\n            img.onload = function () {\n                _this2.setSize(img.width, img.height);\n\n                // callback function\n                if (typeof func !== \"function\") return false;\n                func.apply(_this2);\n            };\n        } else {\n\n            this.setSize(this.opt.width, this.opt.height);\n\n            // callback function\n            if (typeof func !== \"function\") return false;\n            func.apply(this);\n        }\n    };\n\n    Module.prototype.setSize = function (width, height) {\n        this.$modal.css({\n            width: width,\n            height: height\n        });\n\n        if (this.sourceType === \"youtube\" || this.sourceType === \"iframe\") {\n            this.$modalBody.find('iframe').css({\n                width: width,\n                height: height\n            });\n        }\n\n        return this;\n    };\n\n    /**\n     * open body panel\n     * @returns {object} this\n     */\n    Module.prototype.open = function () {\n        var _this3 = this;\n\n        $(\"body\").addClass(\"js-noScroll\");\n\n        this.$modalElements.fadeIn(function () {\n            _this3.setCloseEvent();\n        });\n\n        return this;\n    };\n\n    Module.prototype.close = function () {\n        var _this4 = this;\n\n        this.$modalElements.fadeOut(function () {\n            var $body = $(\"body\");\n\n            if (_this4.sourceType === \"div\" && !_this4.opt.clone) {\n                $body.append($(_this4.target));\n            }\n\n            _this4.$modalElements.remove();\n            $body.removeClass(\"js-noScroll\");\n        });\n\n        return this;\n    };\n\n    Module.prototype.setCloseEvent = function () {\n        var _this5 = this;\n\n        this.$modalCloseElements.on(\"click\", function () {\n            _this5.close();\n        });\n    };\n\n    return factory;\n});"],"sourceRoot":"/source/"}